# Feature Architecture Diagram: Playback Speed Time Adjustment

## Component Interaction Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE LAYER                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Settings > Player Settings                                     â”‚   â”‚
â”‚  â”‚  (player-settings.vue)                                          â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  <ft-toggle-switch>                                      â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    label: "Show Adjusted Time"                           â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    :default-value="showAdjustedTime"                     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    @change="updateShowAdjustedTime"     â—„â”€â”€â”€â”            â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                 â”‚
                                                 â”‚ User Toggle
                                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        STATE MANAGEMENT LAYER                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Vuex Store (settings.js)                                       â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  State:                                                         â”‚   â”‚
â”‚  â”‚    showAdjustedTime: false  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚   â”‚
â”‚  â”‚                                       â”‚                         â”‚   â”‚
â”‚  â”‚  Auto-generated:                      â”‚                         â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                         â”‚   â”‚
â”‚  â”‚    â”‚ Getter:                      â”‚   â”‚                         â”‚   â”‚
â”‚  â”‚    â”‚   getShowAdjustedTime() â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚         â”‚              â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚         â”‚              â”‚   â”‚
â”‚  â”‚    â”‚ Mutation:                    â”‚   â”‚         â”‚              â”‚   â”‚
â”‚  â”‚    â”‚   setShowAdjustedTime(val) â”€â”€â”¼â”€â”€â”€â”˜         â”‚              â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚              â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚              â”‚   â”‚
â”‚  â”‚    â”‚ Action:                      â”‚             â”‚              â”‚   â”‚
â”‚  â”‚    â”‚   updateShowAdjustedTime() â”€â”€â”¼â”€â”€â”€â”€â”€â–º[Save to DB]          â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                      â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                        Reactive Change Propagates     â”‚
                                                       â”‚
                                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         VIDEO PLAYER LAYER                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ft-shaka-video-player.js                                       â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  Computed Property (Reactive):                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ const showAdjustedTime = computed(() =>                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   store.getters.getShowAdjustedTime                     â”‚â”€â”€â”€â”¼â”€â”€â”€â”˜
â”‚  â”‚  â”‚ )                                                        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚                        â”‚                                        â”‚
â”‚  â”‚                        â”‚ Used by                                â”‚
â”‚  â”‚                        â–¼                                        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â”‚ Video Element                                           â”‚   â”‚
â”‚  â”‚  â”‚   @timeupdate="handleTimeupdate"  â—„â”€â”€â”€[Every ~250ms]   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚                     â”‚                                           â”‚
â”‚  â”‚                     â–¼                                           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â”‚ handleTimeupdate()                                      â”‚   â”‚
â”‚  â”‚  â”‚   - Update currentTime                                  â”‚   â”‚
â”‚  â”‚  â”‚   - Update duration                                     â”‚   â”‚
â”‚  â”‚  â”‚   - Handle SponsorBlock                                 â”‚   â”‚
â”‚  â”‚  â”‚   - updateAdjustedTimeDisplay()  â—„â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚                                              â”‚                  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚  â”‚  â”‚                                                              â”‚
â”‚  â”‚  â–¼                                                              â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â”‚ updateAdjustedTimeDisplay()                             â”‚   â”‚
â”‚  â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  â”‚  if (!showAdjustedTime.value) {                         â”‚   â”‚
â”‚  â”‚  â”‚    removeElement()                                      â”‚   â”‚
â”‚  â”‚  â”‚    return                                               â”‚   â”‚
â”‚  â”‚  â”‚  }                                                      â”‚   â”‚
â”‚  â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  â”‚  if (!adjustedElement) {                                â”‚   â”‚
â”‚  â”‚  â”‚    createAndInsertElement()  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚  }                                              â”‚        â”‚   â”‚
â”‚  â”‚  â”‚                                                 â”‚        â”‚   â”‚
â”‚  â”‚  â”‚  Calculate:                                     â”‚        â”‚   â”‚
â”‚  â”‚  â”‚    adjustedDuration = duration / playbackRate  â”‚        â”‚   â”‚
â”‚  â”‚  â”‚    adjustedCurrent = currentTime / playbackRateâ”‚        â”‚   â”‚
â”‚  â”‚  â”‚                                                 â”‚        â”‚   â”‚
â”‚  â”‚  â”‚  Display:                                       â”‚        â”‚   â”‚
â”‚  â”‚  â”‚    "({current} / {duration} @{rate}x)"         â”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚                                                   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                      â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            DOM LAYER                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Shaka Player Controls Structure:                                      â”‚
â”‚                                                                         â”‚
â”‚  .shaka-controls-container                                              â”‚
â”‚    â””â”€ .shaka-bottom-controls                                            â”‚
â”‚        â””â”€ .shaka-current-time  â—„â”€â”€â”€ Parent Element                     â”‚
â”‚            â”œâ”€ [Original Time Display]                                   â”‚
â”‚            â””â”€ #adjusted-duration-display  â—„â”€â”€â”€ Inserted Here           â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ <span id="adjusted-duration-display"                           â”‚   â”‚
â”‚  â”‚       style="margin-left: 8px;                                 â”‚   â”‚
â”‚  â”‚              color: #ffeb3b;                                   â”‚   â”‚
â”‚  â”‚              font-size: [inherited];                           â”‚   â”‚
â”‚  â”‚              align-self: center">                              â”‚   â”‚
â”‚  â”‚   (1:30 / 5:00 @2x)                                            â”‚   â”‚
â”‚  â”‚ </span>                                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Sequence

### 1. Initial Load
```
Application Start
    â”‚
    â”œâ”€â–º Load Settings from NeDB
    â”‚       â”‚
    â”‚       â””â”€â–º grabUserSettings()
    â”‚               â”‚
    â”‚               â””â”€â–º setShowAdjustedTime(value)
    â”‚
    â””â”€â–º Player Component Created
            â”‚
            â””â”€â–º Computed property subscribes to store
```

### 2. User Toggles Setting
```
User clicks toggle
    â”‚
    â”œâ”€â–º @change event fires
    â”‚       â”‚
    â”‚       â””â”€â–º updateShowAdjustedTime(newValue)
    â”‚               â”‚
    â”‚               â”œâ”€â–º Save to NeDB
    â”‚               â”œâ”€â–º Sync to other windows (IPC)
    â”‚               â””â”€â–º setShowAdjustedTime(newValue)
    â”‚
    â””â”€â–º Computed property reacts
            â”‚
            â””â”€â–º Next timeupdate triggers display update
```

### 3. During Video Playback
```
Video Element
    â”‚
    â””â”€â–º @timeupdate event (~250ms intervals)
            â”‚
            â””â”€â–º handleTimeupdate()
                    â”‚
                    â”œâ”€â–º Update time variables
                    â”œâ”€â–º Handle SponsorBlock
                    â””â”€â–º updateAdjustedTimeDisplay()
                            â”‚
                            â”œâ”€â–º Check showAdjustedTime.value
                            â”‚       â”‚
                            â”‚       â”œâ”€â–º If false: Remove element
                            â”‚       â””â”€â–º If true: Continue
                            â”‚
                            â”œâ”€â–º Check playbackRate
                            â”‚       â”‚
                            â”‚       â”œâ”€â–º If 1x: Clear display
                            â”‚       â””â”€â–º If â‰ 1x: Calculate and display
                            â”‚
                            â””â”€â–º Update DOM element text
```

## File Dependencies

```
Static Assets
    â”‚
    â”œâ”€â–º static/locales/pl.yaml â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”œâ”€â–º static/locales/en-US.yaml â”€â”€â”€â”€â”€â”¤
    â””â”€â–º static/locales/en-GB.yaml â”€â”€â”€â”€â”€â”¤
                                       â”‚
                                       â”‚ Provides translations
                                       â–¼
Components                      Translation Keys
    â”‚                                  â”‚
    â”œâ”€â–º player-settings.vue â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚       â”‚
    â”‚       â””â”€â–º player-settings.js
    â”‚               â”‚
    â”‚               â””â”€â”€â”€ Uses Store Actions/Getters
    â”‚                           â”‚
    â”‚                           â”‚
Store Module                    â”‚
    â”‚                           â”‚
    â””â”€â–º settings.js â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚                   â”‚
            â”œâ”€ State            â”‚
            â”œâ”€ Getters          â”‚
            â”œâ”€ Mutations        â”‚
            â””â”€ Actions          â”‚
                â”‚               â”‚
                â”‚               â”‚
NeDB Datastore  â”‚               â”‚
    â”‚           â”‚               â”‚
    â””â”€â”€â”€â”€â”€â–º[Persisted]          â”‚
                                â”‚
Player Component                â”‚
    â”‚                           â”‚
    â”œâ”€â–º ft-shaka-video-player.vue
    â”‚       â”‚
    â”‚       â””â”€â–º ft-shaka-video-player.js â—„â”€â”€â”˜
    â”‚               â”‚
    â”‚               â”œâ”€ Subscribes to store
    â”‚               â”œâ”€ Handles timeupdate
    â”‚               â””â”€ Manipulates DOM
    â”‚
    â””â”€â–º Shaka Player Library
            â”‚
            â””â”€â–º Provides UI structure
```

## Translation System

```
Translation Keys Flow:

Source (en-US.yaml):
    "Show Adjusted Time: Show Adjusted Time at Current Playback Rate"
        â”‚
        â”œâ”€â–º Used in Vue component via $t()
        â”‚       â”‚
        â”‚       â””â”€â–º player-settings.vue:
        â”‚           :label="$t('Settings.Player Settings.Show Adjusted Time')"
        â”‚
        â””â”€â–º Localized versions:
                â”‚
                â”œâ”€â–º Polish (pl.yaml):
                â”‚   "PokaÅ¼ dostosowany czas przy bieÅ¼Ä…cej prÄ™dkoÅ›ci odtwarzania"
                â”‚
                â””â”€â–º English GB (en-GB.yaml):
                    "Show Adjusted Time at Current Playback Rate"
```

## Persistence Layer

```
Memory (Vuex Store State)
        â”‚
        â”œâ”€ Read â”€â”€â–º getShowAdjustedTime()
        â”‚
        â””â”€ Write â”€â–º setShowAdjustedTime(value)
                        â”‚
                        â””â”€â–º updateShowAdjustedTime(value)
                                â”‚
                                â”œâ”€â–º DBSettingHandlers.upsert()
                                â”‚       â”‚
                                â”‚       â””â”€â–º NeDB datastore
                                â”‚           Location: userData/settings
                                â”‚           Format: { _id: "showAdjustedTime", value: boolean }
                                â”‚
                                â””â”€â–º IPC Sync (Electron)
                                    â””â”€â–º Other windows receive update
```

## Visual Display Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Video Player                             â”‚
â”‚                                                                 â”‚
â”‚                   [Video Content Area]                          â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¶  ğŸ”Š â”â”â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â›¶ â¬œ â”‚
â”‚    50%    1:30 / 5:00 (0:45 / 2:30 @2x)           HD  âš™  â›¶   â”‚
â”‚             â–²              â–²                                    â”‚
â”‚             â”‚              â”‚                                    â”‚
â”‚      Original Time    Adjusted Time                            â”‚
â”‚      (actual video)   (perceived duration)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
- Original: 1:30 / 5:00 (1 min 30 sec into 5 min video)
- Adjusted: (0:45 / 2:30 @2x) (45 seconds perceived, 2:30 total @2x speed)
- Color: #ffeb3b (yellow) to differentiate from regular time
```

## Edge Cases Handled

1. **Playback Rate = 1x**: Display is cleared (empty string)
2. **Feature Disabled**: Element is removed from DOM entirely
3. **Element Doesn't Exist**: Created and inserted dynamically
4. **Invalid Duration**: Display is cleared
5. **Live Streams**: May show "NaN" or be hidden based on duration check
6. **Audio-only Format**: Still functions (no special handling needed)

## Performance Optimizations

1. **Element Caching**: DOM query result is stored
2. **Text Comparison**: Only updates if text content changed
3. **Early Returns**: Multiple conditions to avoid unnecessary calculations
4. **Reactive Computed**: Only recalculates when store value changes
5. **Event-driven**: Only runs during actual playback (timeupdate events)
